diff -Naur cfg80211/nl80211.c cfg80211.patch/nl80211.c
--- cfg80211/nl80211.c	2012-01-10 14:18:15.000000000 +0800
+++ cfg80211.patch/nl80211.c	2012-01-13 10:50:20.000000000 +0800
@@ -4073,7 +4073,9 @@
 	spin_lock_bh(&rdev->bss_lock);
 	cfg80211_bss_expire(rdev);
 
+#if (LINUX_VERSION_CODE >= KERNEL_VERSION(3,1,0))
 	cb->seq = rdev->bss_generation;
+#endif
 
 	list_for_each_entry(scan, &rdev->bss_list, list) {
 		if (++idx <= start)
